{"ast":null,"code":"var _jsxFileName = \"/home/vladick/Projects/ecom/front/src/Register.js\",\n    _s = $RefreshSig$();\n\nimport { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { useNavigate } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst PasswordErrorMessage = _ref => {\n  let {\n    msg\n  } = _ref;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      color: 'red'\n    },\n    children: msg\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 6,\n    columnNumber: 39\n  }, this);\n};\n\n_c = PasswordErrorMessage;\nexport default function Register(_ref2) {\n  _s();\n\n  let {\n    regis\n  } = _ref2;\n  const [username, setUsername] = useState('');\n  const [password, setPassword] = useState('');\n  const [password1, setPassword1] = useState('');\n  const [error, setError] = useState('');\n  const [token, setToken] = useState('');\n  const navigate = useNavigate();\n  useEffect(() => {\n    setError('');\n  }, [username, password, password1]);\n\n  const handleSubmit = e => {\n    e.preventDefault();\n\n    if (password !== password1) {\n      setError('You passwords are not equal.');\n      return;\n    } else if (!username || !password || !password1) {\n      setError('Fill all of the fields');\n    } else {\n      axios({\n        url: 'http://localhost:8000/register/',\n        method: 'POST',\n        data: {\n          username: username,\n          password: password\n        }\n      }).then(res => {\n        if (res.data.token) {\n          regis(res.data.token);\n          sessionStorage.setItem('token', res.data.token);\n          navigate('/');\n        } else {\n          setError('Username is taken');\n        }\n      });\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: !sessionStorage.getItem('token') ? /*#__PURE__*/_jsxDEV(\"form\", {\n      className: \"form\",\n      onSubmit: e => handleSubmit(e),\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"username\",\n        children: \"Enter your username:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 3\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        value: username,\n        className: \"input\",\n        name: \"usersname\",\n        onChange: e => setUsername(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 3\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"password\",\n        children: \"Enter your password:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 3\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        value: password,\n        name: \"password\",\n        className: \"input\",\n        type: \"password\",\n        onChange: e => setPassword(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 3\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"password1\",\n        children: \"Confirm your password:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 3\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        value: password1,\n        name: \"password1\",\n        type: \"password\",\n        className: \"input\",\n        onChange: e => setPassword1(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 3\n      }, this), error ? /*#__PURE__*/_jsxDEV(PasswordErrorMessage, {\n        msg: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 3\n      }, this) : null, /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"submit\",\n        value: \"Register\",\n        className: \"submit\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 3\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 2\n    }, this) : /*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"You are logged in!!!\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 3\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 52,\n    columnNumber: 2\n  }, this);\n}\n\n_s(Register, \"5khka8MK/JvIVfn/Gtg1MmNgvsM=\", false, function () {\n  return [useNavigate];\n});\n\n_c2 = Register;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"PasswordErrorMessage\");\n$RefreshReg$(_c2, \"Register\");","map":{"version":3,"names":["useState","useEffect","axios","useNavigate","PasswordErrorMessage","msg","color","Register","regis","username","setUsername","password","setPassword","password1","setPassword1","error","setError","token","setToken","navigate","handleSubmit","e","preventDefault","url","method","data","then","res","sessionStorage","setItem","getItem","target","value"],"sources":["/home/vladick/Projects/ecom/front/src/Register.js"],"sourcesContent":["import {useState, useEffect} from 'react'\nimport axios from 'axios'\nimport {useNavigate} from 'react-router-dom'\n\n\nconst PasswordErrorMessage =({msg})=> <div style={{color:'red'}}>{msg}</div>\n\nexport default function Register({regis}){\n\tconst [username, setUsername] = useState('')\n\tconst [password, setPassword] = useState('')\n\tconst [password1, setPassword1] = useState('')\n\tconst [error, setError] = useState('')\n\tconst [token, setToken] = useState('')\n\tconst navigate = useNavigate()\n\n\tuseEffect(()=>{\n\t\tsetError('')\n\t}, [ username, password, password1])\n\t\n\tconst handleSubmit = e => {\n\t\te.preventDefault()\n\t\tif (password !== password1){\n\t\t\tsetError('You passwords are not equal.')\n\t\t\treturn\n\t\t}\n\t\telse if(!username || !password || !password1){\t\n\t\t\tsetError('Fill all of the fields')\t\n\t\t}\n\t\telse{\n\t\t\taxios({\n\t\t\turl:'http://localhost:8000/register/',\n\t\t\tmethod:'POST',\n\t\t\tdata:{\n\t\t\tusername:username,\n\t\t\tpassword:password\n\t\t\t}\n\t\t\t}).then(res=>{\n\t\t\tif(res.data.token){\n\t\t\t\tregis(res.data.token)\n\t\t\t\tsessionStorage.setItem('token', res.data.token)\n\t\t\t\tnavigate('/')\n\n\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\tsetError('Username is taken')\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\t}\n\n\treturn(\n\t<div>\n\t{!sessionStorage.getItem('token')?\n\t<form className='form' onSubmit={e => handleSubmit(e)}>\n\t\t<label htmlFor='username'>Enter your username:</label>\n\t\t<input value={username} className='input' name='usersname' onChange={e => setUsername(e.target.value)} />\n\t\t\n\t\t<label htmlFor='password'>Enter your password:</label>\n\t\t<input value={password} name='password' className='input' type='password' onChange={e => setPassword(e.target.value)} />\n\n\t\t<label htmlFor=\"password1\">Confirm your password:</label>\n\t\t<input value={password1} name='password1' type='password' className='input' onChange={e => setPassword1(e.target.value)} />\n\t\t{error ?\n\n\t\t<PasswordErrorMessage msg={error}/>\t:\n\t\t\tnull}\n\t\t<input type='submit' value='Register' className='submit'/>\n\t</form>\n\t:\n\t\t<h1>You are logged in!!!</h1>\n\t}\n\t</div>\n\n\t)\n\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}