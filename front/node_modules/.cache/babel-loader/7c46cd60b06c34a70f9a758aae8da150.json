{"ast":null,"code":"var _jsxFileName = \"/home/vladick/Projects/ecom/front/src/Login.js\",\n    _s = $RefreshSig$();\n\nimport axios from 'axios';\nimport { useState, useEffect } from 'react';\nimport { csrftoken } from './Token.js';\nimport './App.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Login(_ref) {\n  _s();\n\n  let {\n    login\n  } = _ref;\n  const [message, setMessage] = useState('');\n  const [token, setToken] = useState('');\n  const [username, setUsername] = useState('');\n  const [password, setPassword] = useState('');\n  useEffect(() => {\n    if (sessionStorage.getItem('token')) {\n      setToken(sessionStorage.getItem('token'));\n    }\n\n    if (token) {\n      axios({\n        method: 'get',\n        url: 'http://localhost:8000',\n        headers: {\n          Authorization: `Token ${token}`\n        }\n      }).then(res => setMessage(res.data.text)).catch(err => console.log(err));\n    }\n  }, [token]);\n\n  const SubmitHandler = e => {\n    e.preventDefault();\n    axios.post('http://localhost:8000/token/', {\n      'username': username,\n      'password': password\n    }).then(res => {\n      login(res.data.token);\n      setToken(res.data.token);\n      sessionStorage.setItem('token', res.data.token);\n    }).catch(err => console.log(err));\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"Login\",\n    children: !sessionStorage.getItem('token') ? /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: SubmitHandler,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          value: csrftoken,\n          type: \"hidden\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 47,\n          columnNumber: 3\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"username\",\n          children: \"Username\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 49,\n          columnNumber: 4\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          className: \"input\",\n          name: \"username\",\n          value: username,\n          onChange: e => setUsername(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"password\",\n          children: \"Password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 4\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          className: \"input\",\n          type: \"password\",\n          name: \"password\",\n          value: password,\n          onChange: e => setPassword(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          className: \"submit\",\n          type: \"submit\",\n          value: \"Log in\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 4\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 17\n    }, this) : /*#__PURE__*/_jsxDEV(\"h1\", {\n      children: message\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 17\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 43,\n    columnNumber: 16\n  }, this);\n}\n\n_s(Login, \"3iueLyPUM9+WnukOmgRgUv2k/pc=\");\n\n_c = Login;\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["axios","useState","useEffect","csrftoken","Login","login","message","setMessage","token","setToken","username","setUsername","password","setPassword","sessionStorage","getItem","method","url","headers","Authorization","then","res","data","text","catch","err","console","log","SubmitHandler","e","preventDefault","post","setItem","target","value"],"sources":["/home/vladick/Projects/ecom/front/src/Login.js"],"sourcesContent":["import axios from 'axios'\nimport {useState, useEffect} from 'react'\nimport {csrftoken} from './Token.js'\nimport './App.css'\n\n\nexport default function Login({login}){\n\n\tconst [message, setMessage] = useState('')\n        const [token, setToken] = useState('')\n        const [username, setUsername] = useState('')\n        const [password, setPassword] = useState('')\n\n        useEffect(()=>{\n\t\tif (sessionStorage.getItem('token')){\n\t\t\tsetToken(sessionStorage.getItem('token'))\n\t\t}\n                if (token){\n                axios({\n                method: 'get',\n                url:'http://localhost:8000',\n                headers: {\n\t                Authorization: `Token ${token}`\n\t                }\n                }).then(res => setMessage(res.data.text)).catch(err => console.log(err))\n                }\n        }, [token])\n\n\n        const SubmitHandler = e => {\n                e.preventDefault()\n                axios.post('http://localhost:8000/token/', {'username':username, 'password':password})\n                .then(res => {\n\t\t\tlogin(res.data.token)\n\t\t\tsetToken(res.data.token)\n\t\t\tsessionStorage.setItem('token', res.data.token)\n\t                })\n                .catch(err => console.log(err))\n\t        }\n\n\n        return (\n               <div className=\"Login\">\n                {!sessionStorage.getItem('token')?\n                <form onSubmit={SubmitHandler}>\n\t       <div className='form'> \n\t\t<input value={csrftoken} type='hidden'/>\n\t        \n\t\t\t<label htmlFor='username'>Username</label>\n                <input className='input' name='username' value={username} onChange={e => setUsername(e.target.value)}/>\n                \n\t\t\t<label htmlFor='password'>Password</label>\n                <input className='input' type='password' name='password' value={password} onChange={e => setPassword(e.target.value)}/>\n                \n\t\t\t<input className='submit' type='submit' value='Log in'/>\n                </div>\n\t\t\t</form>\n                :\n                <h1>{message}</h1>\n                }\n                </div>\n);\n}\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}