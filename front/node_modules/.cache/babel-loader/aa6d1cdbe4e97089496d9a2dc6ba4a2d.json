{"ast":null,"code":"var _jsxFileName = \"/home/vladick/Projects/ecom/front/src/ProductDetail.js\",\n    _s = $RefreshSig$();\n\nimport { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport { useParams } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst productStyle = {\n  width: '90%',\n  padding: '20px',\n  margin: '50px'\n};\nexport default function ProductDetail() {\n  _s();\n\n  const {\n    pk\n  } = useParams();\n  const [product, setProduct] = useState([]);\n  const [added, setAdded] = useState(false);\n  useEffect(() => {\n    axios({\n      url: `http://localhost:8000/products/${pk}`,\n      method: 'GET'\n    }).then(res => {\n      if (res.status === 200) {\n        setProduct(res.data);\n      }\n    });\n  }, []);\n\n  const submitHandler = e => {\n    e.preventDefault();\n    axios({\n      url: 'http://localhost:8000/cart/',\n      method: 'POST',\n      headers: {\n        Authorization: `Token ${sessionStorage.getItem('token')}`\n      },\n      data: {\n        id: pk\n      }\n    }).then(res => {\n      if (res.status === 200) {\n        setAdded(true);\n      }\n    }).catch(err => console.log(err));\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: added ? /*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"product added to your cart\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 5\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      style: productStyle,\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: product.title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 4\n      }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n        src: product.img_url\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 4\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: product.description\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 4\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [product.price, \" UAH\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 4\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: e => submitHandler(e),\n        children: /*#__PURE__*/_jsxDEV(\"input\", {\n          className: \"submit\",\n          type: \"submit\",\n          value: \"add to the cart\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 4\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 4\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 5\n    }, this)\n  }, void 0, false);\n}\n\n_s(ProductDetail, \"wDLRRXi7Lnm094q++aKLVY4HBdc=\", false, function () {\n  return [useParams];\n});\n\n_c = ProductDetail;\n\nvar _c;\n\n$RefreshReg$(_c, \"ProductDetail\");","map":{"version":3,"names":["useEffect","useState","axios","useParams","productStyle","width","padding","margin","ProductDetail","pk","product","setProduct","added","setAdded","url","method","then","res","status","data","submitHandler","e","preventDefault","headers","Authorization","sessionStorage","getItem","id","catch","err","console","log","title","img_url","description","price"],"sources":["/home/vladick/Projects/ecom/front/src/ProductDetail.js"],"sourcesContent":["import {useEffect, useState} from 'react'\nimport axios from 'axios'\nimport {useParams} from 'react-router-dom'\n\nconst productStyle = {\n\twidth:'90%',\n\tpadding:'20px',\n\tmargin:'50px'\n}\n\nexport default function ProductDetail(){\n\n\tconst {pk} = useParams()\n\tconst [product, setProduct] = useState([])\n\tconst [added, setAdded ] = useState(false)\n\n\tuseEffect(()=>{\n\t\taxios({\n\t\turl:`http://localhost:8000/products/${pk}`,\n\t\tmethod:'GET'\n\t\t}).then(res => {\n\t\t\t\n\t\tif(res.status===200){\n\t\t\tsetProduct(res.data)\n\t\t}\n\t\t})\n\n\t}, [])\n\n\tconst submitHandler = e => {\n\te.preventDefault()\n\taxios({\n\t\turl:'http://localhost:8000/cart/',\n\t\tmethod:'POST',\n\t\theaders:{\n\t\t\tAuthorization:`Token ${sessionStorage.getItem('token')}`\n\t\t},\n\t\tdata:{\n\t\t\tid:pk\n\t\t}\n\t}).then(res => {\n\t\tif (res.status===200){\n\t\t\tsetAdded(true)\n\t\t}\n\t}).catch(err => console.log(err))\n\t}\n\n\treturn(\n\t\t<>\n\t\t{\n\t\t\tadded ?\n\t\t\t\t<h1>product added to your cart</h1>\n\t\t\t\t:\n\t\t\t\t<div style={productStyle}>\n\t\t\t<h1>{product.title}</h1>\n\t\t\t<img src={product.img_url}/>\n\t\t\t<p>{product.description}</p>\n\t\t\t<p>{product.price} UAH</p>\n\t\t\t<form onSubmit={e => submitHandler(e)}>\n\t\t\t<input className='submit' type='submit' value='add to the cart'/>\n\t\t\t</form>\n\t\t</div>\n\t\t}\n\t\t</>\n\n\n\n\t)\n\n}\n"],"mappings":";;;AAAA,SAAQA,SAAR,EAAmBC,QAAnB,QAAkC,OAAlC;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAAQC,SAAR,QAAwB,kBAAxB;;;AAEA,MAAMC,YAAY,GAAG;EACpBC,KAAK,EAAC,KADc;EAEpBC,OAAO,EAAC,MAFY;EAGpBC,MAAM,EAAC;AAHa,CAArB;AAMA,eAAe,SAASC,aAAT,GAAwB;EAAA;;EAEtC,MAAM;IAACC;EAAD,IAAON,SAAS,EAAtB;EACA,MAAM,CAACO,OAAD,EAAUC,UAAV,IAAwBV,QAAQ,CAAC,EAAD,CAAtC;EACA,MAAM,CAACW,KAAD,EAAQC,QAAR,IAAqBZ,QAAQ,CAAC,KAAD,CAAnC;EAEAD,SAAS,CAAC,MAAI;IACbE,KAAK,CAAC;MACNY,GAAG,EAAE,kCAAiCL,EAAG,EADnC;MAENM,MAAM,EAAC;IAFD,CAAD,CAAL,CAGGC,IAHH,CAGQC,GAAG,IAAI;MAEf,IAAGA,GAAG,CAACC,MAAJ,KAAa,GAAhB,EAAoB;QACnBP,UAAU,CAACM,GAAG,CAACE,IAAL,CAAV;MACA;IACA,CARD;EAUA,CAXQ,EAWN,EAXM,CAAT;;EAaA,MAAMC,aAAa,GAAGC,CAAC,IAAI;IAC3BA,CAAC,CAACC,cAAF;IACApB,KAAK,CAAC;MACLY,GAAG,EAAC,6BADC;MAELC,MAAM,EAAC,MAFF;MAGLQ,OAAO,EAAC;QACPC,aAAa,EAAE,SAAQC,cAAc,CAACC,OAAf,CAAuB,OAAvB,CAAgC;MADhD,CAHH;MAMLP,IAAI,EAAC;QACJQ,EAAE,EAAClB;MADC;IANA,CAAD,CAAL,CASGO,IATH,CASQC,GAAG,IAAI;MACd,IAAIA,GAAG,CAACC,MAAJ,KAAa,GAAjB,EAAqB;QACpBL,QAAQ,CAAC,IAAD,CAAR;MACA;IACD,CAbD,EAaGe,KAbH,CAaSC,GAAG,IAAIC,OAAO,CAACC,GAAR,CAAYF,GAAZ,CAbhB;EAcC,CAhBD;;EAkBA,oBACC;IAAA,UAECjB,KAAK,gBACJ;MAAA;IAAA;MAAA;MAAA;MAAA;IAAA,QADI,gBAGJ;MAAK,KAAK,EAAER,YAAZ;MAAA,wBACD;QAAA,UAAKM,OAAO,CAACsB;MAAb;QAAA;QAAA;QAAA;MAAA,QADC,eAED;QAAK,GAAG,EAAEtB,OAAO,CAACuB;MAAlB;QAAA;QAAA;QAAA;MAAA,QAFC,eAGD;QAAA,UAAIvB,OAAO,CAACwB;MAAZ;QAAA;QAAA;QAAA;MAAA,QAHC,eAID;QAAA,WAAIxB,OAAO,CAACyB,KAAZ;MAAA;QAAA;QAAA;QAAA;MAAA,QAJC,eAKD;QAAM,QAAQ,EAAEd,CAAC,IAAID,aAAa,CAACC,CAAD,CAAlC;QAAA,uBACA;UAAO,SAAS,EAAC,QAAjB;UAA0B,IAAI,EAAC,QAA/B;UAAwC,KAAK,EAAC;QAA9C;UAAA;UAAA;UAAA;QAAA;MADA;QAAA;QAAA;QAAA;MAAA,QALC;IAAA;MAAA;MAAA;MAAA;IAAA;EALF,iBADD;AAsBA;;GA3DuBb,a;UAEVL,S;;;KAFUK,a"},"metadata":{},"sourceType":"module"}